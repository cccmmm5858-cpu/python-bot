{% extends "layout.html" %}
{% block content %}

<!-- Dashboard Header & Actions -->
<div style="display: flex; flex-direction: column; gap: 2rem; margin-bottom: 2rem;">

    <div style="text-align: right;">
        <h1 style="font-size: 2rem; margin-bottom: 0.5rem;">ğŸ‘‹ Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Astro Bot</h1>
        <p style="color: #94a3b8;">Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„ÙÙ„ÙƒÙŠØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©</p>
    </div>

    <!-- Action Buttons (Right Aligned) -->
    <div class="dashboard-actions">
        <a href="{{ url_for('moon_general') }}" class="action-btn">
            <span>ğŸŒ™</span>
            <span>Ù…Ø¶Ø§Ø±Ø¨Ø© Ø§Ù„Ù‚Ù…Ø±</span>
        </a>
        <a href="{{ url_for('transits_page') }}" class="action-btn" style="border-color: #fbbf24; color: #fbbf24;">
            <span>ğŸŒ</span>
            <span>Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ø¹Ø§Ù…</span>
        </a>
        <a href="{{ url_for('sectors_page') }}" class="action-btn" style="border-color: #22c55e; color: #22c55e;">
            <span>ğŸ“Š</span>
            <span>Ø§Ù„Ù‚Ø·Ø§Ø¹Ø§Øª</span>
        </a>
    </div>

</div>

{% set gold_stocks = stocks | selectattr("rating_val", "equalto", 5) | list %}
{% if gold_stocks %}
<div class="card" style="background: rgba(34, 197, 94, 0.1); border-color: #22c55e;">
    <h3 style="color: #22c55e; margin-bottom: 1rem;">ğŸ”¥ ÙØ±Øµ Ø°Ù‡Ø¨ÙŠØ© Ø§Ù„ÙŠÙˆÙ…!</h3>
    <div style="display: flex; gap: 1rem; overflow-x: auto; padding-bottom: 0.5rem;">
        {% for stock in gold_stocks %}
        <a href="{{ url_for('stock_detail', stock_name=stock.name) }}"
            style="background: rgba(0,0,0,0.3); padding: 0.5rem 1rem; border-radius: 8px; color: white; text-decoration: none; white-space: nowrap;">
            {{ stock.name }} â­â­â­â­â­
        </a>
        {% endfor %}
    </div>
</div>
{% endif %}

<div style="text-align: center; margin-bottom: 2rem;">
    <div style="margin-top: 1rem;">
        <a href="{{ url_for('index') }}" class="btn-nav"
            style="background: {{ 'var(--accent)' if not request.args.get('rating') else '#334155' }};">Ø§Ù„ÙƒÙ„</a>
        <a href="{{ url_for('index', rating='gold') }}" class="btn-nav"
            style="color: #22c55e; border: 1px solid #22c55e;">Ø§Ù„ÙØ±Øµ Ø§Ù„Ø°Ù‡Ø¨ÙŠØ©</a>
        <a href="{{ url_for('index', rating='strong') }}" class="btn-nav"
            style="color: #38bdf8; border: 1px solid #38bdf8;">Ø§Ù„ÙØ±Øµ Ø§Ù„Ù‚ÙˆÙŠØ©</a>
    </div>
</div>

<div class="card">
    <div class="stock-grid">
        {% for stock in stocks %}
        <a href="{{ url_for('stock_detail', stock_name=stock.name) }}" class="card stock-card"
            style="margin-bottom: 0;">
            <span class="stock-icon">ğŸ“ˆ</span>
            <span class="stock-name">{{ stock.name }}</span>
            <div class="{{ stock.rating_color }}" style="font-size: 0.9rem; margin-top: 0.5rem;">{{ stock.rating_text }}
            </div>
        </a>
        {% else %}
        <p style="text-align: center;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ø³Ù‡Ù… ØªØ·Ø§Ø¨Ù‚ Ø§Ù„ÙÙ„ØªØ±.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}